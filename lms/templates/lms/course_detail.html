{% extends 'lms/base.html' %}
{% block title %}{{ course.title }} - Videos{% endblock %}
{% block content %}

<h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">{{ course.title }} - Video Playlist</h1>

{% if request.user.is_staff %}
<div class="flex justify-center mb-6">
    <a href="{% url 'upload_video' course.id %}" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition duration-300">
        + Upload Video
    </a>
</div>
{% endif %}

<div class="space-y-6">
    {% for video in videos %}
    <div class="bg-white border border-gray-200 shadow-sm rounded-lg p-6 hover:shadow-md transition">
        <h2 class="text-xl font-semibold text-gray-800">{{ video.title }}</h2>

        <div class="mt-4">
            <video controls class="w-full rounded-md border border-gray-300">
                <source src="{{ video.video_file.url }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        {% if video.study_material %}
        <a href="{{ video.study_material.url }}" class="text-blue-600 mt-3 inline-block hover:underline" download>
            📄 Download Material
        </a>
        {% endif %}

        {% if request.user.is_staff %}
        <div class="mt-4 flex space-x-6">
            <a href="{% url 'edit_video' video.id %}" class="text-green-600 font-medium hover:underline">✏️ Edit</a>
            <a href="{% url 'delete_video' video.id %}" class="text-red-600 font-medium hover:underline">🗑️ Delete</a>
        </div>
        {% endif %}
    </div>
    {% empty %}
    <p class="text-gray-500 text-center">No videos uploaded yet.</p>
    {% endfor %}
</div>

{% endblock %}
